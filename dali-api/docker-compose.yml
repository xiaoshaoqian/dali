services:
  api:
    build: .
    container_name: dali-api
    ports:
      - "8000:8000"
    env_file:
      - .env
    # 如果需要覆盖特定环境变量，可以取消下面的注释
    # environment:
    #   - APP_ENV=production
    #   - DEBUG=false
    #   - DATABASE_URL=postgresql+asyncpg://postgres:root@host.docker.internal:5432/dali
    restart: unless-stopped
    # 如果在 Windows/Mac 上需要访问宿主机数据库，使用 host.docker.internal
    # 如果在 Linux 上，使用 --network host 或者具体的 IP 地址
    extra_hosts:
      - "host.docker.internal:host-gateway"
